# ðŸ’¥ Impact Analyzer REST API

An intelligent service designed to automatically analyze structural and semantic changes between two versions of Java source code (Baseline vs. Target) and determine the downstream impact on dependent modules.

This application uses JavaParser for Abstract Syntax Tree (AST) analysis to generate semantic diff snippets and simulates dependency resolution and LLM-based impact scoring.

---

## ðŸš€ Getting Started

These instructions will get you a copy of the project up and running on your local machine for development and testing purposes.

### Prerequisites

* **Java Development Kit (JDK) 17+**
* **Gradle** (or similar build tool used in your project setup)
* **Spring Boot** (Tested with Spring Boot 3+)

### Installation

1.  **Clone the Repository:**
    ```bash
    git clone https://github.com/testhackathon01-gif/impact-analyzer.git
    cd impact-analyzer-api
    ```

2.  **Build the Project:**
    Compile the application using Gradle.
    ```bash
    ./gradlew clean build
    ```

3.  **Run the Application:**
    Execute the built JAR file.
    ```bash
    java -jar build/libs/IntelliDiffApplication.jar
    # OR using the Spring Boot Gradle Plugin:
    ./gradlew bootRun
    ```

The application will start on the default port **`8080`**.

---

## ðŸ“‚ Project Structure for Testing

To run the analysis successfully, you must create a local directory structure simulating the two Git commits (Baseline and Target).

### Local Test Directory Setup

Create a base directory for your test data (e.g., `mock_test_repo`). Inside it, create two sub-folders:

Swagger URL:http://localhost:8080/swagger-ui/index.html#/impact-analyzer-controller/analyze
Request:
{
"repositoryUrls": [],
"localFilePath": "/path/to/your/mock_test_repo",
"targetFilename": "A_Helper.java"
}

Response:
[
{
"changedMethod": "getTimestamp",
"llmReport": {
"analysisId": "timestamp-type-change-20231027-001",
"riskScore": 8,
"reasoning": "1. Analyze Contractual Change in Module A: The `getTimestamp()` method's signature has changed from returning a `String` to returning a `long`. This is a fundamental change in the method's contract, altering its output type from a textual representation to a numerical primitive type (milliseconds since epoch).2. Trace Direct Dependencies (Syntactic Check): The `com.app.modulea.DataGenerator` module, specifically its `generateData()` method, directly calls `h.getTimestamp()`. The return value is then assigned to a `String` variable `ts`. With the new signature, `h.getTimestamp()` will return a `long`. Attempting to assign a `long` value directly to a `String` variable (`String ts = h.getTimestamp();`) will result in a compilation error (type mismatch). This constitutes a direct syntactic break.3. Trace Semantic Dependencies (Logic Check): If the syntactic break is resolved by changing `String ts` to `long ts`, the subsequent concatenation `\"Data:\" + ts` would still function due to Java's implicit type conversion of `long` to `String` for concatenation. However, the exact string representation of the timestamp might differ from what was previously generated by the `String` version of `getTimestamp()` (e.g., if the old `String` method formatted the timestamp in a specific way like ISO 8601, whereas the `long` simply converts its numerical value to a string). For this specific case, the primary and most immediate impact is syntactic. Any semantic impact would be secondary and depend on how the `String` representation of the `long` is consumed downstream, but the direct compilation error is the most critical issue.4. Determine Risk Score: The change introduces a direct compilation error in a dependent module, requiring code modification to fix. This is a high-severity API break. Therefore, the risk score is 8.",
"impactedModules": [
{
"moduleName": "com.app.modulea.DataGenerator",
"impactType": "SYNTACTIC_BREAK",
"description": "The `generateData()` method attempts to assign the result of `h.getTimestamp()` to a `String` variable `ts`. The `getTimestamp()` method now returns a `long`, causing a type mismatch and a compilation error. Fix: Change `String ts = h.getTimestamp();` to `long ts = h.getTimestamp();`."
}
]
}
},
{
"changedMethod": "calculateHash",
"llmReport": {
"analysisId": "cascading-impact-analysis-12345",
"riskScore": 1,
"reasoning": "1. Analyze Contractual Change in Module A: The provided 'CODE CHANGE (Module A Diff)' explicitly states that both the 'OLD Signature' and 'NEW Signature' for the `calculateHash` method are identical (`int calculateHash(int a, int b)`). Furthermore, the method body provided is also identical, indicating no change in the internal logic. Therefore, it is concluded that there is no actual change in the public signature, input expectations, output type/format, or internal implementation of the `calculateHash` method in Module A.\n2. Trace Direct Dependencies (Syntactic Check): Module `com.app.modulec.HashConsumer` directly calls `h.calculateHash(10, 5)`. Since no changes were identified in the signature of the `calculateHash` method, there will be no syntactic break or compilation error in `com.app.modulec.HashConsumer`.\n3. Trace Semantic Dependencies (Logic Check): As there is no change in the internal logic of the `calculateHash` method, its behavior and output for given inputs remain identical. Consequently, `com.app.modulec.HashConsumer` will receive the same result as before, and its downstream logic will not be affected by any new business logic or data values from the `calculateHash` method.\n4. Determine Risk Score: Since no changes were identified in Module A's `calculateHash` method, there is no cascading impact on any dependent modules. The risk score is therefore minimal, indicating no risk.",
"impactedModules": [
{
"moduleName": "com.app.modulec.HashConsumer",
"impactType": "NO_IMPACT",
"description": "The `calculateHash` method in `A_Helper` has not changed its signature or internal logic. Therefore, `com.app.modulec.HashConsumer` will continue to call the method with the same signature and receive the same output, resulting in no impact."
}
]
}
}
]

curl -X POST http://localhost:8080/api/v1/impact/analyze \
-H 'Content-Type: application/json' \
-d '{"repositoryUrls": [], "localFilePath": "/path/to/your/mock_test_repo", "targetFilename": "A_Helper.java"}'